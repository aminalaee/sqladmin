{% extends "layout.html" %}

{% block breadcrumb %}
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{{ url_for('admin:index') }}">Home</a></li>
    <li class="breadcrumb-item"><a
        href="{{ url_for('admin:list', identity=model_view.identity) }}">{{ model_view.name_plural }}</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
      {% for pk in model_view.pk_columns -%}
        {{ pk.name }}
        {%- if not loop.last %};{% endif -%}
      {% endfor %}: {{ get_object_identifier(obj) }}
    </li>
  </ol>
{% endblock %}

{% block content %}
  <div class="col-8 offset-2">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Edit {{ model_view.name }}</h3>
      </div>
      <div class="card-body border-bottom py-3">
        <form action="{{ model_view._url_for_edit(request, obj) }}" method="POST" enctype="multipart/form-data">
          <fieldset class="form-fieldset">
            {% for field in form %}
              <div class="mb-3 form-group row">
                {{ field.label(class_="form-label col-sm-2 col-form-label") }}
                <div class="col-sm-10">
                  {% if field.errors %}
                    {{ field(class_="form-control is-invalid") }}
                  {% else %}
                    {{ field() }}
                  {% endif %}
                  {% for error in field.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                  {% endfor %}
                </div>
              </div>
            {% endfor %}
          </fieldset>
          <div class="d-flex space-x justify-content-between">
            {% if error %}
              <div class="alert alert-danger" role="alert">{{ error }}</div>
            {% endif %}
            <div class="btn-list flex-wrap" data-toggle="buttons">
              <input type="submit" name="save" value="Save" class="btn btn-primary">
              <input type="submit" name="save" value="Save and continue editing" class="btn">
              {% if model_view.save_as %}
                <input type="submit" name="save" value="Save as new" class="btn">
              {% else %}
                <input type="submit" name="save" value="Save and add another" class="btn">
              {% endif %}
            </div>
            <div>
              <a href="{{ url_for('admin:list', identity=model_view.identity) }}" class="btn">
                Cancel
              </a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
